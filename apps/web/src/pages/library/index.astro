---
import LibraryLayout from '../../layouts/LibraryLayout.astro';
import BooksList from '../../components/library/BooksList';
import Sidebar from '../../components/library/Sidebar';
import Header from '../../components/Header.astro';
import { mockBooks } from '../../data/mock-books';
import { groupByGenre } from '../../lib/library-utils';

const title = "Library | Anauseam";
const description = "My personal library of books.";
const permalink = Astro.site ? `${Astro.site}library` : '/library';

const genres = groupByGenre(mockBooks);
---

<LibraryLayout title={title} description={description} permalink={permalink}>
  <div class="flex min-h-screen bg-[var(--layout-bg)]">
    <Sidebar genres={genres} client:load />
    
    <main class="flex-1 py-8 px-6 md:px-10 relative z-0 md:ml-[280px]">
        <div class="mb-8">
           <Header current="library" />
        </div>
        
        <div class="max-w-7xl mx-auto">
          <div class="page-header mb-12">
              <h1 class="text-3xl md:text-4xl font-bold text-[var(--text-main)] font-serif mb-6 leading-tight">My Library</h1>
              <p class="text-[var(--text-main)] leading-relaxed mb-4 opacity-80">Discover your next favorite book</p>
          </div>
          
          <BooksList books={mockBooks} client:load />
        </div>
    </main>
  </div>
</LibraryLayout>
